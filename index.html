<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/kgy0zxv.css">
    <title>POLYHYMN</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/my-favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/my-favicon/favicon.svg" />
    <link rel="shortcut icon" href="/my-favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/my-favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="PolyHymn" />
    <link rel="manifest" href="/my-favicon/site.webmanifest" />
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/keyboard.css">
    <link rel="stylesheet" href="css/sampler.css">
    <link rel="stylesheet" href="css/lfo.css">
    <link rel="stylesheet" href="css/adsr.css">
    <link rel="stylesheet" href="css/oscillator.css">
    <link rel="stylesheet" href="css/filter.css">
    <link rel="stylesheet" href="css/modulation.css">
    <link rel="stylesheet" href="css/looper.css">
    <link rel="stylesheet" href="css/fx.css">
    <link rel="stylesheet" href="css/delay.css">
    <link rel="stylesheet" href="css/master.css">
    <link rel="stylesheet" href="css/sequencer.css">
  </head>
  <body>
      <div class="container">
          
          <div class="synth-panel">
          
          <!-- Modules Row -->
          <div class="modules-row">
           
  <!-- LFO Module -->
  <div class="module LFO-Module" style="min-width: 205px; max-width: 205px;">
    <div class="lfo">MATRIX</div>
    <div class="matrix-buttons-container" style="position: relative; z-index: 10;">
      <div class="matrix-button">MOD</div>
      <div class="matrix-button">LFO</div>
      <div class="matrix-button">1</div>
      <div class="matrix-button">2</div>
      <div class="matrix-button">3</div>
      <div class="matrix-button">4</div>
    </div>
    <div class="lfo-controls-container" style="z-index: 5;">
  
      
  <!-- Replace the button switches with a vertical 9-position slider -->
  <div class="lfo-destination-container">
    <!-- Vertical slider with 9 notches -->
    <input type="range" class="lfo-destination-range" min="0" max="12" step="1" value="0" orient="vertical">
    
    <!-- Tick marks with labels -->
    <div class="lfo-destination-ticks">
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Sampler Pitch</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 1 Pitch</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 2 Pitch</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Sampler Gain</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 1 Gain</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 2 Gain</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 1 PWM</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 2 PWM</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 1 Quant</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 2 Quant</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 1 FM</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Osc 2 FM</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Overload</span>
      </div>
    </div>
    <div class="destination-label">Destination</div>
  </div>
  <div class="lfo-destination-container">
    <!-- Vertical slider with 9 notches -->
    <input type="range" class="lfo-destination-range" min="0" max="12" step="1" value="0" orient="vertical">
    
    <!-- Tick marks with labels -->
    <div class="lfo-destination-ticks">
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Lo-Fi</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Speed</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Jump</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Filter</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Stutter</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Pitch</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Delay Time</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Warp</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Feedback</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Cutoff</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Variant</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Resonance</span>
      </div>
      <div class="tick-with-label">
        <div class="tick"></div>
        <span class="tick-label">Lo-Fi Amt</span>
      </div>
      
    </div>
    <div class="destination-label">Destination</div>
  
  </div>
  </div>
  <!-- New 3-column layout for knobs -->
  <div class="matrix-knobs-container" style="display: flex; justify-content: space-between; margin-top: 15px; width: 94%;">
    <!-- Column 1 -->
    <div class="matrix-knob-column" style="flex-direction: column; align-items: center;">
      <div class="select-button-container">
        <div class="select-button" id="lfo-select-button">
          <img src="control icons/destination-select.svg" alt="Destination Select" class="icon">
          <div class="select-led"></div>
        </div>
        <label for="lfo-select-button"style="
        margin-top: 1px;
    ">Select</label>
      </div>
      <div class="knob-container">
        <div class="knob" id="matrix-depth-knob" style="background-color: #6B8F53; box-shadow: 0 0 0 4.2px #6B8F53, 0 0 0 6px #35100B;"></div>
        <label for="matrix-depth-knob">Depth</label>
      </div>
  
      
  
    </div>
    
    <!-- Column 2 -->
      <div class="matrix-knob-column" style="flex-direction: column; align-items: center; margin-top: 9px;    display: flex
  ;">
        <div class="knob-container">
          <div class="knob" id="macro1-knob" style="background-color: #4E658B; box-shadow: 0 0 0 4.2px #4E658B, 0 0 0 6px #35100B;"></div>
          <label for="macro1-knob">Macro 1</label>
        </div>
        <div class="knob-container">
          <div class="knob" id="macro3-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
          <label for="macro3-knob">Macro 3</label>
        </div>
      
  
    </div>
    
    <!-- Column 3 -->
    <div class="matrix-knob-column" style="flex-direction: column; align-items: center; margin-top: 9px;    display: flex
  ;">
    <div class="knob-container">
      <div class="knob" id="macro2-knob" style="background-color: #E5AB5F; box-shadow: 0 0 0 4.2px #E5AB5F, 0 0 0 6px #35100B;"></div>
      <label for="macro2-knob">Macro 2</label>
    </div>
  
    <div class="knob-container">
      <div class="knob" id="macro4-knob" style="background-color: #CF814D; box-shadow: 0 0 0 4.2px #CF814D, 0 0 0 6px #35100B;"></div>
      <label for="macro4-knob">Macro 4</label>
    </div> 
  
  </div>
  </div>
  </div>
  
  <!-- Updated MODULATION Module with canvas at top and two-column layout below -->
  <div class="module modulation-module">
    <div class="module-title modulation">MODULATION</div>
    
    <!-- Canvas at the top of the module -->
    <div class="mod-canvas-container">
      <canvas id="mod-canvas" width="120" height="100"></canvas>
      <div class="mod-grid-overlay"></div>
    </div>
    
    <!-- Two columns below the canvas -->
    <div class="mod-columns-container">
      <!-- Left column: controls stacked vertically -->
      <div class="mod-left-column" style="height: 191.400px;">
        <!-- Three-way vertical selector -->
        <div class="mod-selector-container">
          <div class="mod-mode-selector">
            <div class="mode-option" data-mode="env">ENV</div>
            <div class="mode-option active" data-mode="lfo">LFO</div>
            <div class="mode-option" data-mode="trig">TRIG</div>
          </div>
        </div>
        
        <!-- Rate Knob -->
        <div class="knob-container" style="
      margin-top: 31.5px;"> 
          <div class="knob" id="mod-rate-knob"></div>
          <label for="mod-rate-knob">Rate</label>
        </div>
  
        
        
      </div>
      
      <!-- Right column: destination slider -->
      <div class="mod-right-column">
        <!-- Left side: Vertical sliders -->
        <div class="lfo-sliders-container">
  
  
          
          <!-- Rate Slider -->
          <div class="slider-tick-container">
            <input type="range" class="rate-slider-range" min="0" max="1" step="0.01" value="0.5" orient="vertical">
            <div class="slider-label"style="margin-top: 17px;">Rate</div>
          </div>
  
    <!-- Delay Slider (renamed to "Fade In") -->
    <div class="slider-tick-container">
      <input type="range" class="delay-slider-range" min="0" max="1" step="0.01" value="0" orient="vertical">
      <div class="slider-label"style="margin-top: 17px;">Fade</div>
    </div>
  </div>
      </div>
    </div>
    <div class="mod-bottom-controls">
      <div class="knob-container">
        <div class="knob" id="mod-depth-knob"></div>
        <label for="mod-depth-knob"style="
        margin-right: 6px;
    ">Depth</label>
      </div>
  <!-- Update this line in the mod-bottom-controls section -->
  <div class="shape-knob-container">
    <!-- Fixed position shape markers at exact angles -->
    <div class="shape-markers">
      <!-- -150 degrees -->
      <div class="shape-marker" style="transform: rotate(-150deg) translateY(-30px) rotate(150deg);">
        <img src="SHAPES/wave-sine.svg" alt="Sine" width="13" height="9">
      </div>
      <!-- -75 degrees -->
      <div class="shape-marker" style="transform: rotate(-75deg) translateY(-30px) rotate(75deg);">
        <img src="SHAPES/sawtooth-wave.svg" alt="Sawtooth" width="13" height="9">
      </div>
      <!-- 0 degrees -->
      <div class="shape-marker" style="transform: rotate(0deg) translateY(-30px) rotate(0deg);">
        <img src="SHAPES/triangle-shape.svg" alt="Triangle" width="13" height="9">
      </div>
      <!-- 75 degrees -->
      <div class="shape-marker" style="transform: rotate(75deg) translateY(-30px) rotate(-75deg);">
        <img src="SHAPES/square-wave.svg" alt="Square" width="13" height="9">
      </div>
      <!-- 150 degrees -->
      <div class="shape-marker" style="transform: rotate(150deg) translateY(-30px) rotate(-150deg);">
        <img src="SHAPES/mod-random.svg" alt="Random" width="13" height="9">
      </div>
    </div>
    
    <!-- The knob itself - UPDATED with shape-knob class -->
    <div class="shape-knob" id="mod-shape-knob"></div>
  
  </div>
    </div>
  </div>
  
  <!-- Updated SAMPLER Module with matching styling -->
  <div class="module sampler-module">
    <div class="module-title sampler">SAMPLER</div>
    
    <!-- Two-column layout container -->
    <div class="sampler-columns">
      <!-- Left Column -->
      <div class="sampler-column">
  <!-- Completely revised HTML for the file input -->
  <div class="sample-selector-container">
    <div class="sample-selector-container">
      <label for="audio-file" id="load-sample-label" class="custom-file-button">Load</label>
      <input type="file" id="audio-file" accept="audio/*" class="hidden-file-input">
    </div>
  </div>
        
  <div class="switch-container lofi-button-container">
    <div class="lofi-button" id="emu-mode-switch">
      <img src="control icons/lo-fi.svg" alt="Lo-Fi" class="icon">
    </div>
    <label for="emu-mode-switch">Lo-Fi</label>
  </div>
        <div class="switch-container reverse-button-container">
          <div class="reverse-button" id="reverse-button">
            <img src="control icons/reverse.svg" alt="Reverse" class="icon">
          </div>
          <label for="reverse-button">Reverse</label>
        </div>
        <div class="knob-container">
          <div class="knob" id="sample-volume-knob"></div>
          <label for="sample-volume-knob">Volume</label>
        </div>
        
        <div class="knob-container">
          <div class="knob" id="sample-pitch-knob"></div>
          <label for="sample-pitch-knob">Pitch</label>
        </div>
        
        <div class="knob-container">
          <div class="knob" id="sample-fade-knob"></div>
          <label for="sample-fade-knob">Fade</label>
        </div>
      </div>
      
      <!-- Right Column -->
      <div class="sampler-column">
        <!-- Sample selector dropdown -->
        <div class="sample-selector-container">
          <button id="sample-selector-btn">Presets</button>
          <div id="sample-dropdown" class="sample-dropdown">
            <div class="dropdown-item" data-sample="Dirty Bass.wav">Dirty Bass</div>
            <div class="dropdown-item" data-sample="Piano.wav">Piano</div>
            <div class="dropdown-item" data-sample="Noise.wav">Noise</div>
            <div class="dropdown-item" data-sample="Saw.wav">Saw</div>
            <div class="dropdown-item" data-sample="Mallet.wav">Mallet</div>
          </div>
        </div>
        
        <div class="switch-container rec-button-container">
          <div class="rec-button" id="mic-record-button">
            <img src="control icons/record.svg" alt="Record" class="icon">
          </div>
          <label for="mic-record-button">Rec</label>
        </div>
        <div class="switch-container keytrack-button-container">
          <div class="keytrack-button active" id="keytrack-button">
            <img src="control icons/keyboard.svg" alt="Keyboard" class="icon">
  
            <div class="select-led" style="background-color: #c52a18; box-shadow: 0 0 4px #ff0000;"></div>
          </div>
          <label for="keytrack-button">Key-Track</label>
        </div>
        <div class="knob-container">
          <div class="knob" id="sample-start-knob"></div>
          <label for="sample-start-knob">Start</label>
        </div>
        
        <div class="knob-container">
          <div class="knob" id="sample-end-knob"></div>
          <label for="sample-end-knob">End</label>
        </div>
        
        <div class="knob-container">
          <div class="knob" id="sample-crossfade-knob"></div>
          <label for="sample-crossfade-knob">Loop</label>
        </div>
      </div>
    </div>
  </div>
  
  <!-- OSCILLATOR 1 Module -->
  <div class="module oscillator-module"> <!-- Keep existing classes -->
    <div class="module-title oscillator">OSCILLATOR 1</div> <!-- Changed title -->

    <!-- Wave Shape Selector -->
    <div class="osc-selector-container"> <!-- Keep existing classes -->
      <!-- Add ID, keep existing classes -->
      <input type="range" id="osc1-wave-selector" class="five-step-selector-range" min="0" max="4" step="1" value="2">
      <div class="five-step-ticks"> <!-- Keep existing classes -->
        <!-- ... ticks ... -->
         <div class="tick-container">
          <div class="tick"></div>
          <div class="wave-shape">
            <img src="SHAPES/wave-sine.svg" alt="Sine" width="18" height="14">
          </div>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <div class="wave-shape">
            <img src="SHAPES/sawtooth-wave.svg" alt="Sawtooth" width="18" height="14">
          </div>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <div class="wave-shape">
            <img src="SHAPES/triangle-shape.svg" alt="Triangle" width="18" height="14">
          </div>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <div class="wave-shape">
            <img src="SHAPES/square-wave.svg" alt="Square" width="18" height="14">
          </div>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <div class="wave-shape">
            <img src="SHAPES/pulse.svg" alt="Pulse" width="18" height="14">
          </div>
        </div>
      </div>
    </div>

    <!-- Octave Selector -->
    <div class="osc-selector-container"> <!-- Keep existing classes -->
      <!-- Add ID, keep existing classes -->
      <input type="range" id="osc1-octave-selector" class="five-step-selector-range" min="0" max="4" step="1" value="2">
      <div class="five-step-ticks"> <!-- Keep existing classes -->
        <!-- ... ticks ... -->
         <div class="tick-container">
          <div class="tick"></div>
          <span class="octave-label">-2</span>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <span class="octave-label">-1</span>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <span class="octave-label">0</span>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <span class="octave-label">+1</span>
        </div>
        <div class="tick-container">
          <div class="tick"></div>
          <span class="octave-label">+2</span>
        </div>
      </div>
    </div>

    <!-- Two columns for controls -->
    <div class="osc-columns-container"> <!-- Keep existing classes -->
      <!-- Left column -->
      <div class="osc-left-column"> <!-- Keep existing classes -->
        <!-- FM Source Switch -->
        <div class="osc-switch-container"> <!-- Keep existing classes -->
          <!-- <<< CORRECTED LABEL >>> -->
          <label class="osc-switch-label osc-switch-label-top">Sampler</label>
          <!-- Add ID, keep existing classes -->
          <div class="osc-vertical-switch" id="osc1-fm-source-switch"></div>
          <label class="osc-switch-label osc-switch-label-bottom">Osc 2</label>
        </div>

        <!-- PWM Knob -->
        <div class="knob-container"> <!-- Keep existing classes -->
          <!-- Add ID, keep existing classes -->
          <div class="knob" id="osc1-pwm-knob"></div>
          <label for="osc1-pwm-knob">PWM</label>
        </div>

        <!-- Pitch Knob -->
        <div class="knob-container"> <!-- Keep existing classes -->
          <!-- Add ID, keep existing classes -->
          <div class="knob" id="osc1-pitch-knob"></div>
          <label for="osc1-pitch-knob">Pitch</label>
        </div>
      </div>

      <!-- Right column -->
      <div class="osc-right-column"> <!-- Keep existing classes -->
        <!-- FM Knob -->
        <div class="knob-container"> <!-- Keep existing classes -->
          <!-- Add ID, keep existing classes -->
          <div class="knob" id="osc1-fm-knob"></div>
          <label for="osc1-fm-knob">FM</label>
        </div>

        <!-- Quantize Knob -->
        <div class="knob-container"> <!-- Keep existing classes -->
          <!-- Add ID, keep existing classes -->
          <div class="knob" id="osc1-quantize-knob"></div>
          <label for="osc1-quantize-knob">Quantize</label>
        </div>

        <!-- Gain Knob -->
        <div class="knob-container"> <!-- Keep existing classes -->
          <!-- Add ID, keep existing classes -->
          <div class="knob" id="osc1-gain-knob"></div>
          <label for="osc1-gain-knob">Gain</label>
        </div>
      </div>
    </div>
  </div>
  <!-- OSCILLATOR 2 Module -->
  <div class="module oscillator-module">
    <div class="module-title oscillator">OSCILLATOR 2</div>

    <!-- Wave Shape Selector -->
    <div class="osc-selector-container">
        <!-- <<< ADD ID >>> -->
        <input type="range" id="osc2-wave-selector" class="five-step-selector-range" min="0" max="4" step="1" value="2">
        <div class="five-step-ticks">
            <!-- ... ticks ... -->
             <div class="tick-container">
              <div class="tick"></div>
              <div class="wave-shape">
                <img src="SHAPES/wave-sine.svg" alt="Sine" width="18" height="14">
              </div>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <div class="wave-shape">
                <img src="SHAPES/sawtooth-wave.svg" alt="Sawtooth" width="18" height="14">
              </div>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <div class="wave-shape">
                <img src="SHAPES/triangle-shape.svg" alt="Triangle" width="18" height="14">
              </div>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <div class="wave-shape">
                <img src="SHAPES/square-wave.svg" alt="Square" width="18" height="14">
              </div>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <div class="wave-shape">
                <img src="SHAPES/pulse.svg" alt="Pulse" width="18" height="14">
              </div>
            </div>
        </div>
    </div>

    <!-- Octave Selector -->
    <div class="osc-selector-container">
        <!-- <<< ADD ID >>> -->
        <input type="range" id="osc2-octave-selector" class="five-step-selector-range" min="0" max="4" step="1" value="2">
        <div class="five-step-ticks">
            <!-- ... ticks ... -->
             <div class="tick-container">
              <div class="tick"></div>
              <span class="octave-label">-2</span>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <span class="octave-label">-1</span>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <span class="octave-label">0</span>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <span class="octave-label">+1</span>
            </div>
            <div class="tick-container">
              <div class="tick"></div>
              <span class="octave-label">+2</span>
            </div>
        </div>
    </div>

    <!-- Two columns for controls -->
    <div class="osc-columns-container">
        <!-- Left column -->
        <div class="osc-left-column">
            <!-- FM Source Switch -->
            <div class="osc-switch-container">
                <label class="osc-switch-label osc-switch-label-top">Sampler</label>
                <!-- <<< ADD ID >>> -->
                <div class="osc-vertical-switch" id="osc2-fm-source-switch"></div>
                <label class="osc-switch-label osc-switch-label-bottom">Osc 1</label>
            </div>

            <!-- PWM Knob -->
            <div class="knob-container">
                <!-- <<< ADD ID >>> -->
                <div class="knob" id="osc2-pwm-knob"></div>
                <label for="osc2-pwm-knob">PWM</label>
            </div>

            <!-- Pitch Knob -->
            <div class="knob-container">
                <!-- <<< ADD ID >>> -->
                <div class="knob" id="osc2-pitch-knob"></div>
                <label for="osc2-pitch-knob">Pitch</label>
            </div>
        </div>

        <!-- Right column -->
        <div class="osc-right-column">
            <!-- FM Knob -->
            <div class="knob-container">
                <!-- <<< ADD ID >>> -->
                <div class="knob" id="osc2-fm-knob"></div>
                <label for="osc2-fm-knob">FM</label>
            </div>

            <!-- Quantize Knob -->
            <div class="knob-container">
                <!-- <<< ADD ID >>> -->
                <div class="knob" id="osc2-quantize-knob"></div>
                <label for="osc2-quantize-knob">Quantize</label>
            </div>

            <!-- Gain Knob -->
            <div class="knob-container">
                <!-- <<< ADD ID >>> -->
                <div class="knob" id="osc2-gain-knob"></div>
                <label for="osc2-gain-knob">Gain</label>
            </div>
        </div>
    </div>
  </div>
  <!-- FILTER Module -->
  <div class="module filter-module">
    <div class="module-title filter">FILTER</div>
    
    <div class="filter-controls-container">
      <!-- Filter sliders section with separate tracks -->
<div class="filter-sliders-container">
  <div class="slider-tick-container">
    <div class="filter-slider-track"></div>
    <input type="range" class="freq-slider-range" min="8" max="16000" step="0.00001" value="16000" orient="vertical">
    <div class="filter-slider-label">Freq</div>
  </div>
  
  <div class="slider-tick-container">
    <div class="filter-slider-track"></div>
    <input type="range" class="res-slider-range" min="0" max="1" step="0.01" value="0.5" orient="vertical">
    <div class="filter-slider-label">Res</div>
  </div>
</div>
      
      <!-- Right side: Filter Type Selector (vertical) -->
      <div class="filter-type-container">
        <!-- Vertical slider with 5 notches -->
        <input type="range" class="filter-type-range" min="0" max="4" step="1" value="0" orient="vertical">
        
        <!-- Tick marks with labels -->
        <div class="filter-type-ticks">
          <div class="tick-with-label">
            <div class="tick"></div>
            <span class="tick-label">LP 12</span>
          </div>
          <div class="tick-with-label">
            <div class="tick"></div>
            <span class="tick-label">LP 24</span>
          </div>
          <div class="tick-with-label">
            <div class="tick"></div>
            <span class="tick-label">LH 6</span>
          </div>
          <div class="tick-with-label">
            <div class="tick"></div>
            <span class="tick-label">LH 12</span>
          </div>
          <div class="tick-with-label">
            <div class="tick"></div>
            <span class="tick-label">LH 24</span>
          </div>
        </div>
        <div class="filter-type-label">Type</div>
      </div>
    </div>
    
    <!-- Horizontal sliders container -->
    <div class="filter-horizontal-sliders">
      <!-- Drive slider -->
      <div class="horizontal-slider-container">
        <input type="range" class="drive-slider-range" min="0" max="1" step="0.01" value="0">
  
        <div class="horizontal-slider-label">Drive</div>
      </div>
      
      <!-- Variant slider -->
      <div class="horizontal-slider-container">
        <input type="range" class="variant-slider-range" min="0" max="1" step="0.01" value="0">
  
        <div class="horizontal-slider-label">Variant</div>
      </div>
    </div>
    
    <!-- Bottom knobs -->
    <div class="filter-bottom-controls">
      <div class="filter-knob-container">
        <div class="knob" id="adsr-knob"></div>
        <label for="adsr-knob">ADSR</label>
      </div>
      <div class="filter-knob-container">
        <div class="knob" id="keytrack-knob"></div>
        <label for="keytrack-knob">Key-Track</label>
      </div>
    </div>
  </div>
              <!-- ADSR Module -->
              <div class="module" style="grid-column: span 2;">
                <div class="module-title adsr">ADSR Envelope</div>
                
                <!-- Mode Selection Buttons -->
                <div class="adsr-mode-buttons">
                  <div class="adsr-mode-button-wrapper">
                    <div class="adsr-mode-button active" id="adsr-mode-button">
                      <img src="control icons/vca.svg" alt="ADSR" class="icon">
                    </div>
                    <label for="adsr-mode-button">ADSR</label>
                  </div>
                  
                  <div class="adsr-mode-button-wrapper">
                    <div class="adsr-mode-button" id="filter-mode-button">
                      <img src="control icons/vcf.svg" alt="Filter" class="icon">
                    </div>
                    <label for="filter-mode-button">FILTER</label>
                  </div>
                  
                  <div class="adsr-mode-button-wrapper">
                    <div class="adsr-mode-button" id="classic-mode-button">
                      <img src="control icons/adsr.svg" alt="Classic" class="icon">
                    </div>
                    <label for="classic-mode-button">CLASSIC</label>
                  </div>
                </div>
                
                <div class="adsr-graph" id="adsr-visualization">
                  <div class="adsr-line"></div>
                </div>
              
                <!-- Amplitude ADSR sliders (shown when ADSR mode active) -->
                <div class="slider-group adsr-sliders" id="amplitude-adsr-sliders">
                  <div class="slider-attack">
                    <span id="attack-value">0</span>
                    <input type="range" id="attack" min="0" max="30" step="0.001" value="0">
                  </div>
                  <div class="slider-decay">
                    <span id="decay-value">0.0</span>
                    <input type="range" id="decay" min="0" max="30" step="0.001" value="0.0">
                  </div>
                  <div class="slider-sustain">
                    <span id="sustain-value">1</span>
                    <input type="range" id="sustain" min="0" max="1" step="0.001" value="1">
                  </div>
                  <div class="slider-release">
                    <span id="release-value">0.00</span>
                    <input type="range" id="release" min="0" max="30" step="0.001" value="0.000">
                  </div>
                </div>

                <!-- Filter Envelope sliders (shown when FILTER mode active) -->
                <div class="slider-group filter-sliders" id="filter-envelope-sliders">
                  <div class="slider-attack">
                    <span id="filter-attack-value">0</span>
                    <input type="range" id="filter-attack" min="0" max="30" step="0.001" value="0">
                  </div>
                  <div class="slider-decay">
                    <span id="filter-decay-value">0.0</span>
                    <input type="range" id="filter-decay" min="0" max="30" step="0.001" value="0.0">
                  </div>
                  <div class="slider-sustain">
                    <span id="filter-sustain-value">1</span>
                    <input type="range" id="filter-sustain" min="0" max="1" step="0.001" value="1">
                  </div>
                  <div class="slider-release">
                    <span id="filter-release-value">0.00</span>
                    <input type="range" id="filter-release" min="0" max="30" step="0.001" value="0.000">
                  </div>
                </div>
                
                <div class="slider-labels">
                  <label>A</label>
                  <label>D</label>
                  <label>S</label>
                  <label>R</label>
                </div>
              </div>
              
  
              <div class="module master-module">
                <div class="module-title master">MASTER</div>
                
  <!-- Updated POLY/MONO switch with split labels -->
  <div class="switch-container">
    <label class="switch-label switch-label-top">POLY</label>
    <div class="vertical-switch" id="voice-mode-switch"></div>
    <label class="switch-label switch-label-bottom">MONO</label>
  </div>
  
  <!-- Updated MULTI/LEGATO switch with split labels -->
  <div class="switch-container">
    <label class="switch-label switch-label-top">MULTI</label>
    <div class="vertical-switch" id="trigger-mode-switch"></div>
    <label class="switch-label switch-label-bottom">LEGATO</label>
  </div>
                  
                  <!-- Portamento controls -->
                  <div class="legato-controls">
                    <div class="porta-button-wrapper">
                      <div class="porta-button" id="portamento-switch">
                        <img src="control icons/portamento.svg" alt="Portamento" class="icon">
                      </div>
                      <label for="portamento-switch">PORTA</label>
                    </div>
                    
                    <!-- Glide Time Knob (unchanged) -->
                    <div class="knob-container">
                      <div class="knob" id="glide-time-knob"></div>
                      <label for="glide-time-knob">Glide</label>
                    </div>
                  </div>
  
                
                <!-- Master Volume -->
                <div class="knob-container">
                  <div class="knob" id="master-volume-knob"></div>
                  <label for="master-volume-knob">Volume</label>
                </div>
              </div>
      
     
        
  <!-- LOOPER Module -->
  <div class="module looper-module">
    <div class="module-title looper">LOOPER</div>
    
    <!-- Updated looper buttons container with icons -->
  <div class="looper-buttons-container">
    <div class="looper-button-with-label">
      <div class="looper-button record-button" id="looper-record-button">
        <img src="looper button icons/record 2.svg" alt="Record" class="icon">
      </div>
      <label for="looper-record-button" class="looper-label">REC</label>
    </div>
    
    <div class="looper-button-with-label">
      <div class="looper-button record-button" id="looper-play-button">
        <img src="looper button icons/play 1.svg" alt="Play" class="icon">
      </div>
      <label for="looper-play-button" class="looper-label">PLAY</label>
    </div>
    
    <div class="looper-button-with-label">
      <div class="looper-button record-button" id="looper-additive-button">
        <img src="looper button icons/add 1.svg" alt="Add" class="icon">
      </div>
      <label for="looper-additive-button" class="looper-label">ADD</label>
    </div>
    
    <div class="looper-button-with-label">
      <div class="looper-button orange-button" id="looper-delete-button">
        <img src="looper button icons/delete.svg" alt="Delete" class="icon">
      </div>
      <label for="looper-delete-button" class="looper-label">DEL</label>
    </div>
    
    <div class="looper-button-with-label">
      <div class="looper-button orange-button" id="looper-undo-button">
        <img src="looper button icons/undo 1.svg" alt="Undo" class="icon">
      </div>
      <label for="looper-undo-button" class="looper-label">UNDO</label>
    </div>
    
    <div class="looper-button-with-label">
      <div class="looper-button orange-button" id="looper-redo-button">
        <img src="looper button icons/redo 1.svg" alt="Redo" class="icon">
      </div>
      <label for="looper-redo-button" class="looper-label">REDO</label>
    </div>
  </div>
    
    <div class="looper-columns">
      <!-- Column 1 -->
      <div class="looper-column">
        <!-- Layers knob (yellow, 8 notches) -->
        <div class="layers-knob-container">
          <div class="layers-markers">
            <div class="layer-marker" style="transform: rotate(-150deg) translateY(-30px) rotate(150deg);">1</div>
            <div class="layer-marker" style="transform: rotate(-107.14deg) translateY(-30px) rotate(107.14deg);">2</div>
            <div class="layer-marker" style="transform: rotate(-64.29deg) translateY(-30px) rotate(64.29deg);">3</div>
            <div class="layer-marker" style="transform: rotate(-21.43deg) translateY(-30px) rotate(21.43deg);">4</div>
            <div class="layer-marker" style="transform: rotate(21.43deg) translateY(-30px) rotate(-21.43deg);">5</div>
            <div class="layer-marker" style="transform: rotate(64.29deg) translateY(-30px) rotate(-64.29deg);">6</div>
            <div class="layer-marker" style="transform: rotate(107.14deg) translateY(-30px) rotate(-107.14deg);">7</div>
            <div class="layer-marker" style="transform: rotate(150deg) translateY(-30px) rotate(-150deg);">8</div>
          </div>
          <div class="shape-knob" id="looper-layers-knob" style="background-color: #E5AB5F; box-shadow: 0 0 0 4.2px #E5AB5F, 0 0 0 6px #35100B; bottom: 0px; margin-bottom: 17px; margin-top: 2px;"></div>
          <label for="looper-layers-knob"style="
          margin-bottom: 0px; font-size: 10px; font-weight: 750; font-variant-caps: all-small-caps;">Layers</label>
        </div>
        
        <!-- Start knob (red) -->
        <div class="knob-container">
          <div class="knob" id="looper-start-knob" style="background-color: #CF814D; box-shadow: 0 0 0 4.2px #CF814D, 0 0 0 6px #35100B;"></div>
          <label for="looper-start-knob">Start</label>
        </div>
        
        <!-- Speed knob (blue) -->
        <div class="knob-container">
          <div class="knob" id="looper-speed-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
          <label for="looper-speed-knob">Speed</label>
        </div>
        
        <!-- Filter knob (green) -->
        <div class="knob-container">
          <div class="knob" id="looper-filter-knob" style="background-color: #4E658B; box-shadow: 0 0 0 4.2px #4E658B, 0 0 0 6px #35100B;"></div>
          <label for="looper-filter-knob">Filter</label>
        </div>
      </div>
      
      <!-- Column 2 -->
      <div class="looper-column">
        <!-- Volume knob (yellow) -->
        <div class="knob-container">
          <div class="knob" id="looper-volume-knob" style="background-color: #E5AB5F; box-shadow: 0 0 0 4.2px #E5AB5F, 0 0 0 6px #35100B;"></div>
          <label for="looper-volume-knob">Volume</label>
        </div>
        
        <!-- End knob (red) -->
        <div class="knob-container">
          <div class="knob" id="looper-end-knob" style="background-color: #CF814D; box-shadow: 0 0 0 4.2px #CF814D, 0 0 0 6px #35100B;"></div>
          <label for="looper-end-knob">End</label>
        </div>
        
        <!-- Dropouts knob (blue) -->
        <div class="knob-container">
          <div class="knob" id="looper-dropouts-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
          <label for="looper-dropouts-knob">Dropouts</label>
        </div>
        
        <!-- Stutter knob (green) -->
        <div class="knob-container">
          <div class="knob" id="looper-stutter-knob" style="background-color: #4E658B; box-shadow: 0 0 0 4.2px #4E658B, 0 0 0 6px #35100B;"></div>
          <label for="looper-stutter-knob">Stutter</label>
        </div>
      </div>
      
      <!-- Column 3 -->
      <div class="looper-column">
        <!-- Lo-Fi knob (yellow) -->
        <div class="knob-container">
          <div class="knob" id="looper-lofi-knob" style="background-color: #E5AB5F; box-shadow: 0 0 0 4.2px #E5AB5F, 0 0 0 6px #35100B;"></div>
          <label for="looper-lofi-knob">Lo-Fi</label>
        </div>
        
        <!-- Repeats knob (red) -->
        <div class="knob-container">
          <div class="knob" id="looper-repeats-knob" style="background-color: #CF814D; box-shadow: 0 0 0 4.2px #CF814D, 0 0 0 6px #35100B;"></div>
          <label for="looper-repeats-knob">Repeats</label>
        </div>
        
        <!-- Jump knob (blue) -->
        <div class="knob-container">
          <div class="knob" id="looper-jump-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
          <label for="looper-jump-knob">Jump</label>
        </div>
        
        <!-- Pitch knob (green) -->
        <div class="knob-container">
          <div class="knob" id="looper-pitch-knob" style="background-color: #4E658B; box-shadow: 0 0 0 4.2px #4E658B, 0 0 0 6px #35100B;"></div>
          <label for="looper-pitch-knob">Pitch</label>
        </div>
      </div>
    </div>
  </div>
  
  <!-- FX Module -->
  <div class="module fx-module">
    <div class="module-title fx">FX</div>
    
    <!-- Chorus Button -->
    <div class="chorus-button-container">
      <div class="chorus-button" id="chorus-button">
        <span class="chorus-indicator first">I</span>
        <span class="chorus-indicator second">I</span>
      </div>
      <label for="chorus-button" style="margin-top: 4.5px;">Chorus</label>
    </div>
    
    <!-- Knob Column -->
    <div class="fx-knobs-column">
      <!-- Overload knob (yellow) -->
      <div class="knob-container">
        <div class="knob" id="overload-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
        <label for="overload-knob">Overload</label>
      </div>
      
      <!-- Cabinet knob (yellow) -->
      <div class="knob-container">
        <div class="knob" id="cabinet-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
        <label for="cabinet-knob">Cabinet</label>
      </div>
      
      <!-- Loss knob (blue) -->
      <div class="knob-container">
        <div class="knob" id="loss-knob" style="background-color: #4E658B; box-shadow: 0 0 0 4.2px #4E658B, 0 0 0 6px #35100B;"></div>
        <label for="loss-knob">Loss</label>
      </div>
      
      <!-- Artifacts knob (blue) -->
      <div class="knob-container">
        <div class="knob" id="artifacts-knob" style="background-color: #4E658B; box-shadow: 0 0 0 4.2px #4E658B, 0 0 0 6px #35100B;"></div>
        <label for="artifacts-knob">Artifacts</label>
      </div>
    </div>
  </div>
  <!-- DELAY Module -->
  <div class="module delay-module">
    <div class="module-title delay">
      <div class="delay-title-section red-title"></div>
      <div class="delay-title-section orange-title"></div>
      <div class="delay-title-section yellow-title"></div>
      <div class="delay-title-section green-title"></div>
      <span class="delay-title-text">DELAY</span>
    </div>
    
    <div class="delay-sections">
      <!-- Red Section (Time) -->
      <div class="delay-section red-section">
        <div class="delay-slider-container">
          <div class="delay-slider-track"></div>
          <input type="range" class="delay-slider" min="0" max="100" value="50" orient="vertical">
          <label class="delay-slider-label">Time</label>
        </div>
        
        <!-- Switches for Reverse and Freeze -->
        <div class="delay-switches"style="
        margin-bottom: 21px;
    ">
          <div class="delay-switch-container">
            <div class="horizontal-switch" id="reverse-switch"></div>
            <label for="reverse-switch" class="delay-switch-label">Reverse</label>
          </div>
          
          <div class="delay-switch-container">
            <div class="horizontal-switch" id="freeze-switch"></div>
            <label for="freeze-switch" class="delay-switch-label">Freeze</label>
          </div>
        </div>
      </div>
      
      <!-- Orange Section (Length) -->
      <div class="delay-section orange-section">
        <div class="delay-slider-container">
          <div class="delay-slider-track"></div>
          <input type="range" class="delay-slider" min="0" max="100" value="50" orient="vertical">
          <label class="delay-slider-label">Length</label>
        </div>
        
        <!-- Low Cut knob -->
        <div class="knob-container">
          <div class="knob" id="low-cut-knob" style="background-color: #CF814D; box-shadow: 0 0 0 4.2px #CF814D, 0 0 0 6px #35100B;"></div>
          <label for="low-cut-knob">Low Cut</label>
        </div>
      </div>
      
      <!-- Yellow Section (Feedback) -->
      <div class="delay-section yellow-section">
        <div class="delay-slider-container">
          <div class="delay-slider-track"></div>
          <input type="range" class="delay-slider" min="0" max="100" value="50" orient="vertical">
          <label class="delay-slider-label">Feedback</label>
        </div>
        
        <!-- High Cut knob -->
        <div class="knob-container">
          <div class="knob" id="high-cut-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
          <label for="high-cut-knob">High Cut</label>
        </div>
      </div>
      
      <!-- Green Section (Density) -->
      <div class="delay-section green-section">
        <div class="delay-slider-container">
          <div class="delay-slider-track"></div>
          <input type="range" class="delay-slider" min="0" max="100" value="50" orient="vertical">
          <label class="delay-slider-label">Density</label>
        </div>
        
        <!-- Mix knob -->
        <div class="knob-container">
          <div class="knob" id="mix-knob" style="background-color: #6B8F53; box-shadow: 0 0 0 4.2px #6B8F53, 0 0 0 6px #35100B;"></div>
          <label for="mix-knob">Mix</label>
        </div>
      </div>
    </div>
  </div>
  
  </div> <!-- End of modules-row -->
          
          <!-- L-shaped sequencer container -->
          <div class="sequencer-l-shape">
              <!-- Top horizontal bar of the L -->
              <div class="sequencer-top-bar">
                  <img src="my-favicon/favicon.svg" alt="PolyHymn Logo" class="polyhymn-logo">
                  <span class="polyhymn-title">POLYHYMN</span>
                  
                  <!-- Transport Controls -->
                  <div class="seq-transport-controls">
                      <div class="seq-transport-button" id="seq-play-button">
                          <img src="control%20icons/PLAY.svg" alt="Play" class="icon small-icon">
                          <div class="select-led"></div>
                      </div>
                      <div class="seq-transport-button" id="seq-pause-button">
                          <img src="control%20icons/PAUSE.svg" alt="Pause" class="icon small-icon">
                          <div class="select-led"></div>
                      </div>
                      <div class="seq-transport-button-container">
                          <div class="seq-transport-button" id="seq-motion-button">
                              <img src="control%20icons/MOTION.svg" alt="Motion" class="icon medium-icon">
                              <div class="select-led"></div>
                          </div>
                          <label for="seq-motion-button">MOD REC</label>
                      </div>
                      <div class="seq-transport-button" id="seq-record-button">
                          <img src="looper%20button%20icons/record%202.svg" alt="Record" class="icon">
                          <div class="select-led"></div>
                      </div>
                  </div>
                  
                  <!-- Metronome Knob -->
                  <div class="seq-top-knob-container">
                      <div class="knob" id="seq-metronome-vol-knob" style="background-color: #6B8F53; box-shadow: 0 0 0 4.2px #6B8F53, 0 0 0 6px #35100B;"></div>
                      <label for="seq-metronome-vol-knob">METRONOME</label>
                  </div>
                  
                  <!-- Record Button -->
                  <div class="seq-top-record-container">
                      <div class="seq-top-record-button" id="seq-top-record-button">
                          <img src="looper%20button%20icons/record%202.svg" alt="Record" class="icon">
                      </div>
                      <label for="seq-top-record-button">STEP REC</label>
                  </div>
                  
                  <!-- Arrow Icon -->
                  <div class="seq-steps-arrow-icon">
                      <img src="control%20icons/DIVISIONRIGHT.svg" alt="Arrow" class="arrow-icon">
                  </div>
                  
                  <!-- Step Buttons Container -->
                  <div class="seq-steps-container">
                      <div class="seq-step-button" id="seq-step-1">1</div>
                      <div class="seq-step-button" id="seq-step-2">2</div>
                      <div class="seq-step-button" id="seq-step-3">3</div>
                      <div class="seq-step-button" id="seq-step-4">4</div>
                      <div class="seq-step-button" id="seq-step-5">5</div>
                      <div class="seq-step-button" id="seq-step-6">6</div>
                      <div class="seq-step-button" id="seq-step-7">7</div>
                      <div class="seq-step-button" id="seq-step-8">8</div>
                      <div class="seq-step-button" id="seq-step-9">9</div>
                      <div class="seq-step-button" id="seq-step-10">10</div>
                      <div class="seq-step-button" id="seq-step-11">11</div>
                      <div class="seq-step-button" id="seq-step-12">12</div>
                      <div class="seq-step-button" id="seq-step-13">13</div>
                      <div class="seq-step-button" id="seq-step-14">14</div>
                      <div class="seq-step-button" id="seq-step-15">15</div>
                      <div class="seq-step-button" id="seq-step-16">16</div>
                  </div>
                  
                  <!-- Backward Arrow Icon -->
                  <div class="seq-page-arrow-icon">
                      <img src="control%20icons/DIVISIONRIGHT.svg" alt="Backward Arrow" class="arrow-icon" style="transform: rotate(180deg);">
                  </div>
                  
                  <!-- Page Button Container (only buttons - for centering) -->
                  <div class="seq-page-button-container">
                      <div class="seq-page-buttons">
                          <div class="seq-page-down" id="seq-page-down">
                              <img src="control%20icons/LEFT.svg" alt="Left" class="direction-button-icon">
                          </div>
                          <div class="seq-page-up" id="seq-page-up">
                              <img src="control%20icons/RIGHT.svg" alt="Right" class="direction-button-icon">
                          </div>
                      </div>
                      <!-- Page Indicator and Label (positioned below, doesn't affect centering) -->
                      <div class="seq-page-bottom">
                          <div class="seq-page-dots-container">
                              <div class="seq-dot active" data-page="1"></div>
                              <div class="seq-dot" data-page="2"></div>
                              <div class="seq-dot" data-page="3"></div>
                              <div class="seq-dot" data-page="4"></div>
                          </div>
                          <label for="seq-page-buttons">PAGE</label>
                      </div>
                  </div>
                  
                  <!-- Quantize Knob -->
                  <div class="seq-top-knob-container">
                      <div class="knob" id="seq-quantize-knob" style="background-color: #BA5446; box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;"></div>
                      <label for="seq-quantize-knob">QUANTIZE</label>
                  </div>
                  
                  <!-- Sequence Save/Load Buttons -->
                  <div class="seq-sequence-container">
                      <div class="seq-sequence-buttons">
                          <div class="seq-sequence-button" id="seq-save-button">SAVE</div>
                          <div class="seq-sequence-button" id="seq-load-button">LOAD</div>
                      </div>
                      <input type="file" id="seq-load-file-input" accept="application/json,.json" class="hidden-file-input">
                      <label for="seq-sequence-buttons">SEQUENCE</label>
                  </div>
                  
                  <!-- Spread Knob -->
                  <div class="seq-top-knob-container">
                      <div class="knob" id="seq-spread-knob" style="background-color: #E5AB5F; box-shadow: 0 0 0 4.2px #E5AB5F, 0 0 0 6px #35100B;"></div>
                      <label for="seq-spread-knob">SPREAD</label>
                  </div>
                  
                  <!-- State Save/Load Buttons -->
                  <div class="seq-sequence-container">
                      <div class="seq-sequence-buttons">
                          <div class="seq-sequence-button" id="seq-state-save-button">SAVE</div>
                          <div class="seq-sequence-button" id="seq-state-load-button">LOAD</div>
                      </div>
                      <label for="seq-state-buttons">STATE</label>
                  </div>
                  
                  <!-- Four Chorus-Style Buttons -->
                  <div class="seq-chorus-button-container">
                      <div class="seq-chorus-button" id="seq-vel-after-button">
                          <img src="control icons/keyboard.svg" alt="Keyboard" class="seq-chorus-icon">
                      </div>
                      <label class="seq-chorus-button-label">VEL / AFTER</label>
                  </div>
                  
                  <div class="seq-chorus-button-container">
                      <div class="seq-chorus-button" id="seq-tips-button">
                          <span class="seq-chorus-icon seq-tips-icon">?</span>
                      </div>
                      <label class="seq-chorus-button-label">TIPS</label>
                  </div>
                  
                  <div class="seq-chorus-button-container">
                      <div class="seq-chorus-button" id="seq-precision-button">
                          <img src="control%20icons/PRECISION.svg" alt="Precision" class="seq-chorus-icon">
                      </div>
                      <label class="seq-chorus-button-label">PRECISION</label>
                  </div>
                  
                  <div class="seq-chorus-button-container">
                      <div class="seq-chorus-button" id="seq-link-params-button">
                          <img src="control%20icons/MIDI.svg" alt="MIDI" class="seq-chorus-icon">
                      </div>
                      <label class="seq-chorus-button-label">LINK PARAMS</label>
                  </div>
              </div>
              
              <!-- Bottom section with vertical part and keyboard -->
              <div class="sequencer-bottom-row">
                  <!-- Left vertical part of L (bottom of sequencer) -->
                  <div class="sequencer-vertical">
                      <!-- Button Column -->
                      <div class="seq-buttons-column">
                          <!-- HOLD Button -->
                          <div class="seq-button-container">
                            <div class="seq-hold-button" id="seq-hold-button">
                              <img src="control icons/HOLD.svg" alt="Hold" class="icon">
                            </div>
                            <label for="seq-hold-button">HOLD</label>
                          </div>
                          
                          <!-- Octave Buttons (Split) -->
                          <div class="seq-button-container">
                            <div class="seq-octave-buttons">
                              <div class="seq-octave-down" id="seq-octave-down"></div>
                              <div class="seq-octave-up" id="seq-octave-up">+</div>
                            </div>
                            <!-- Octave Indicator (5 dots) -->
                            <div class="seq-dots-container">
                              <div class="seq-dot active" data-octave="1"></div>
                              <div class="seq-dot" data-octave="2"></div>
                              <div class="seq-dot" data-octave="3"></div>
                              <div class="seq-dot" data-octave="4"></div>
                              <div class="seq-dot" data-octave="5"></div>
                            </div>
                            <label for="seq-octave-buttons">OCTAVE</label>
                          </div>
                          
                          <!-- Direction Button (Split) -->
                          <div class="seq-button-container">
                            <div class="seq-direction-buttons">
                              <div class="seq-direction-down" id="seq-direction-down">
                                <img src="control icons/LEFT.svg" alt="Down" class="direction-button-icon">
                              </div>
                              <div class="seq-direction-up" id="seq-direction-up">
                                <img src="control icons/RIGHT.svg" alt="Up" class="direction-button-icon">
                              </div>
                            </div>
                            <!-- Direction Indicator (5 dots) -->
                            <div class="seq-dots-container">
                              <div class="seq-dot active" data-direction="up"></div>
                              <div class="seq-dot" data-direction="down"></div>
                              <div class="seq-dot" data-direction="forward"></div>
                              <div class="seq-dot" data-direction="updown"></div>
                              <div class="seq-dot" data-direction="random"></div>
                            </div>
                            <label for="seq-direction-buttons">
                              <div class="seq-direction-label-icons">
                                <img src="control icons/ARPUP.svg" alt="Up" class="label-icon">
                                <img src="control icons/ARPDOWN.svg" alt="Down" class="label-icon">
                                <img src="control icons/ARPFORWARD.svg" alt="Forward" class="label-icon">
                                <img src="control icons/UPDOWN.svg" alt="Up-Down" class="label-icon">
                                <img src="control icons/ARPRANDOM.svg" alt="Random" class="label-icon">
                              </div>
                            </label>
                          </div>
                          
                          <!-- ARP Button -->
                          <div class="seq-button-container">
                            <div class="seq-arp-button" id="seq-arp-button">
                              <img src="control icons/ARP.svg" alt="ARP" class="icon">
                            </div>
                            <label for="seq-arp-button">ARP</label>
                          </div>
                      </div>
                      
                      <!-- Sequencer Destination Column -->
                      <div class="seq-destination-column">
                          <!-- Destination Slider -->
                          <div class="seq-destination-container">
                            <input type="range" class="seq-destination-range" min="0" max="5" step="1" value="0" orient="vertical">
                            
                            <!-- Tick marks with labels -->
                            <div class="seq-destination-ticks">
                              <div class="tick-with-label">
                                <div class="tick"></div>
                                <span class="tick-label">LOSS</span>
                              </div>
                              <div class="tick-with-label">
                                <div class="tick"></div>
                                <span class="tick-label">DELAY</span>
                              </div>
                              <div class="tick-with-label">
                                <div class="tick"></div>
                                <span class="tick-label">LFO</span>
                              </div>
                              <div class="tick-with-label">
                                <div class="tick"></div>
                                <span class="tick-label">MOD</span>
                              </div>
                              <div class="tick-with-label">
                                <div class="tick"></div>
                                <span class="tick-label">ARP</span>
                              </div>
                              <div class="tick-with-label">
                                <div class="tick"></div>
                                <span class="tick-label">GLOBAL</span>
                              </div>
                            </div>
                            <div class="seq-dest-label">Destination</div>
                          </div>
                          
                          <!-- Select Button -->
                          <div class="seq-select-button-container">
                            <div class="seq-select-button" id="seq-select-button">
                              <img src="control%20icons/destination-select.svg" alt="Destination Select" class="icon">
                              <div class="select-led"></div>
                            </div>
                            <label for="seq-select-button">Select</label>
                          </div>
                      </div>
                      
                      <!-- Tempo/Metronome Column -->
                      <div class="seq-tempo-column">
                          <!-- Metronome Button -->
                          <div class="seq-metronome-button-container">
                            <div class="seq-metronome-button" id="seq-metronome-button">
                              <img src="control%20icons/METRONOME.svg" alt="Metronome" class="icon">
                              <div class="select-led"></div>
                            </div>
                            <label for="seq-metronome-button" class="tap-label">TAP</label>
                            <div class="arrow-label">
                              <img src="control%20icons/TAPDOWN.svg" alt="Down Arrow" class="arrow-icon">
                            </div>
                          </div>
                          
                          <!-- Tempo Knob -->
                          <div class="knob-container" style="
    margin-bottom: 0px; margin-top: 6px;">
                            <div class="knob" id="seq-tempo-knob" style="background-color: #CF814D; box-shadow: 0 0 0 4.2px #CF814D, 0 0 0 6px #35100B; margin-top: 7px;margin-bottom: 10;"></div>
                            <label for="seq-tempo-knob" style="
    margin-top: 0px;
">Tempo</label>
                          </div>
                          
                          <!-- Division Knob with Arrow -->
                          <div class="seq-division-with-arrow">
                            <!-- Forward Arrow Icon -->
                            <div class="seq-forward-icon">
                              <img src="control%20icons/DIVISIONRIGHT.svg" alt="Forward" class="forward-icon">
                            </div>
                            
                            <!-- Division Knob -->
                            <div class="knob-container"style="
    margin-top: 0px;">
                              <div class="knob" id="seq-division-knob" style="background-color: #BA5446;box-shadow: 0 0 0 4.2px #BA5446, 0 0 0 6px #35100B;margin-bottom: 1.5;margin-bottom: 1.5;margin-bottom: 2px;"></div>
                              <label for="seq-division-knob">Division</label>
                            </div>
                          </div>
                      </div>
                      
                      <!-- Pitch Bend Column -->
                      <div class="seq-pitch-column">
                          <!-- Octave Buttons (Split) -->
                          <div class="seq-button-container">
                            <div class="seq-octave-buttons">
                              <div class="seq-octave-down" id="seq-keyboard-octave-down"></div>
                              <div class="seq-octave-up" id="seq-keyboard-octave-up">+</div>
                            </div>
                            <!-- Octave Indicator (5 dots) -->
                            <div class="seq-dots-container">
                              <div class="seq-dot" data-octave="1"></div>
                              <div class="seq-dot" data-octave="2"></div>
                              <div class="seq-dot active" data-octave="3"></div>
                              <div class="seq-dot" data-octave="4"></div>
                              <div class="seq-dot" data-octave="5"></div>
                            </div>
                            <label for="seq-keyboard-octave-buttons">OCTAVE</label>
                          </div>
                          
                          <!-- Pitch Bend Slider -->
                          <div class="seq-pitch-slider-container">
                            <input type="range" class="seq-pitch-slider" min="-2" max="2" step="0.01" value="0" orient="vertical">
                            <label for="seq-pitch-slider">PITCH</label>
                          </div>
                      </div>
                  </div>
                  
                  <!-- Keyboard on the right -->
                  <div class="keyboard" id="keyboard">
                      <!-- Keys will be generated by JavaScript -->
                  </div>
              </div>
          </div>
          
          </div> <!-- End of synth-panel -->
          
      </div>
    

    <!-- JavaScript Modules -->
     <link rel="modulepreload" href="js/moog-filter-processor.js">
    <script src="https://unpkg.com/tone"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>